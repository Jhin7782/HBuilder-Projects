<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/media.css" />
		<link rel="stylesheet" type="text/css" href="css/scale_yy.css"/>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/fontsize.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/adjust.js" type="text/javascript" charset="utf-8"></script>

		<style type="text/css">
			#p1_bg {
				width: 16rem;
				position: relative;
			}
			#bubble {
				width: 11.625rem;
				height: 8.575rem;
				position: absolute;
				top: 1.8rem;
				left: 1.8rem;
			}
			#slogan1 {
				width: 6.75rem;
				position: absolute;
				top: 2.2rem;
				left: 3.5rem;
			}
			#slogan2_1 {
				width: 3.525rem;
				position: absolute;
				top: 5rem;
				left: 1.95rem;
			}
			#slogan2_2 {
				width: 7.575rem;
				position: absolute;
				top: 3.8rem;
				left: 5.25rem;
			}
			#slogan3_1 {
				width: 4.95rem;
				position: absolute;
				top: 7rem;
				left: 2.15rem;
			}
			#slogan3_2 {
				width: 6.225rem;
				position: absolute;
				top: 6.2rem;
				left: 7rem;
			}
			#enter {
				background: transparent;
				background-image: url(img/p1/p1_btn_263_85.png);
				background-size: 100% 100%;
				position: absolute;
				left: 4.7125rem;
				bottom: 3.5rem;
				width: 6.575rem;
				height: 2.125rem;
			}
			#btn_rule {
				background: transparent;
				background-image: url(img/p1/btn_rule.png);
				background-size: 100% 100%;
				width: 6.575rem;
				height: 2.125rem;
				position: absolute;
				bottom: 1rem;
				left: 4.7125rem;
			}
			
			#rule_block {
				display: none;
			}
			#game_rule {
				width: 14.7rem;
				height: 10.1rem;
				position: absolute;
				top: 6rem;
				left: 0.65rem;
			}
			#begin_game {
				width: 5.95rem;
				height: 1.675rem;
				position: absolute;
				top: 13rem;
				left: 5.025rem;
			}
			
			
			
			#mc_play {
				background-image: url(img/p2/mcbg.png);
				width: 1.4rem;
				height: 1.4rem;
				position: fixed;
				right: 0.5rem;
				top: 0.5rem;
				animation: reverseRotataZ 4s linear infinite normal;
				-webkit-animation: reverseRotataZ 4s linear infinite normal;
				animation: rotataZ 4s linear infinite normal;
				-webkit-animation: rotataZ 4s linear infinite normal;
			}
			
			@-webkit-keyframes reverseRotataZ {
				0% {
					-webkit-transform: rotateZ(0deg);
				}
				100% {
					-webkit-transform: rotateZ(-360deg);
				}
			}
			
			@-webkit-keyframes rotataZ {
				0% {
					-webkit-transform: rotateZ(0deg);
				}
				100% {
					-webkit-transform: rotateZ(360deg);
				}
			}
			
			
		
			#demo {
				background-color: lightgreen;
				width: 16rem;
				overflow: hidden;
				position: relative;
				display: none;
			}
			#demo1 {
				position: absolute;
				bottom: 0rem;
				left: 0rem;
				/*-webkit-transition: bottom 0.3s ease;*/
			}
			
			#count_ready {
				width: 4.7rem;
				height: 1.7rem;
				position: absolute;
				left: 5.65rem;
				top: 8rem;
				display: block;
				animation: countReady 2s linear 0.5s 1 normal;
				-webkit-animation: countReady 2s linear 0.5s 1 normal;
			}
			#count_go {
				width: 3.275rem;
				height: 1.425rem;
				position: absolute;
				left: 6.3625rem;
				top: 8rem;
				display: none;
				animation: countGo 1s linear 0s 1 normal;
				-webkit-animation: countGo 1s linear 0s 1 normal;
			}
			@keyframes countReady{
				0%{
					opacity: 0.2;
					transform: scale(0);
				}
				75%{
					opacity: 1;
					transform: scale(1);
				}
				100%{
					opacity: 0;
					transform: scale(1.25);
				}
			}
			@-webkit-keyframes countReady{
				0%{
					-webkit-opacity: 0.2;
					-webkit-transform: scale(0);
				}
				75%{
					-webkit-opacity: 1;
					-webkit-transform: scale(1);
				}
				100%{
					-webkit-opacity: 0;
					-webkit-transform: scale(1.25);
				}
			}
			@keyframes countGo{
				0%{
					opacity: 0.2;
					transform: scale(0);
				}
				75%{
					opacity: 1;
					transform: scale(1);
				}
				100%{
					opacity: 0;
					transform: scale(1.25);
				}
			}
			@-webkit-keyframes countGo{
				0%{
					-webkit-opacity: 0.2;
					-webkit-transform: scale(0);
				}
				75%{
					-webkit-opacity: 1;
					-webkit-transform: scale(1);
				}
				100%{
					-webkit-opacity: 0;
					-webkit-transform: scale(1.25);
				}
			}
			
			#clock {
				width: 4.225rem;
				position: absolute;
				top: 0.15rem;
				left: 0.15rem;
			}
			#time_counter {
				position: absolute;
				top: 0.825rem;
				left: 2.25rem;
				color: white;
			}
			
			
			#progress_bar #progress_percent_pos{
				color: white;
				font-size: 0.5rem;
				position: absolute;
				top: 0.3rem;
				left: 11.8rem;
			}
			#progress_bar #pro_bar {
				background-color: white;
				width: 6rem;
				height: 0.2rem;
				position: absolute;		
				top: 0.5rem;	
				left:5.15rem;
				border-radius: 0.1rem;
			}
			#progress_bar #pro_bar_front {
				background-color: #FEC538;
				width: 0rem;
				height: 0.2rem;
				position: absolute;		
				top: 0.5rem;	
				left:5.15rem;
				border-radius: 0.1rem;
				transition: width;
			}
			
			
			#player_left {
				width: 1.8rem;
				height: 3.6rem;
				position: absolute;
				left: 7.1rem;
				top: 12.3rem;
				/*bottom: 4.9rem;*/
				display: block;
			}
			#player_right {
				width: 1.8rem;
				height: 3.6rem;
				position: absolute;
				left: 7.1rem;
				top: 12.3rem;
				/*bottom: 4.9rem;*/
				display: none;
			}
			#player_gogo {
				width: 2.425rem;
				height: 4.475rem;
				position: absolute;
				left: 6.7875rem;
				top: 12.3rem;
				/*bottom: 4.9rem;*/
				display: none;
			}
			
			#btn_left {
				position: absolute;
				left: 1rem;
				bottom: 0.5rem;
				width: 3.125rem;
				height: 3.2rem;
				background-image: url(img/p2/btn_left_125_128.png);
				background-size: 100% 100%;
				border-radius: 1.6rem;
				margin-right: 6.8rem;
				display: block;
			}
			#btn_left_down {
				position: absolute;
				left: 1rem;
				bottom: 0.5rem;
				width: 3.125rem;
				height: 3.2rem;
				background-image: url(img/p2/btn_left_down_125_127.png);
				background-size: 100% 100%;
				border-radius: 1.6rem;
				margin-right: 6.8rem;
				display: none;
			}
			#btn_right {
				position: absolute;
				right: 1rem;
				bottom: 0.5rem;
				width: 3.125rem;
				height: 3.2rem;
				background-image: url(img/p2/btn_right_125_128.png);
				background-size: 100% 100%;
				border-radius: 1.6rem;
				display: block;
			}
			#btn_right_down {
				position: absolute;
				right: 1rem;
				bottom: 0.5rem;
				width: 3.125rem;
				height: 3.2rem;
				background-image: url(img/p2/btn_right_down_126_127.png);
				background-size: 100% 100%;
				border-radius: 1.6rem;
				display: none;
			}
			#gogo {
				position: absolute;
				left: 6.025rem;
				bottom: 1.5rem;
				width: 3.95rem;
				height: 1.025rem;
				background-image: url(img/p2/gogo.png);
				background-size: 100% 100%;
				display: block;
			}
			#gogo_active {
				position: absolute;
				left: 6.025rem;
				bottom: 1.5rem;
				width: 3.95rem;
				height: 1.025rem;
				background-image: url(img/p2/gogo_active.png);
				background-size: 100% 100%;
				display: none;
			}
			#noready {
				/*background-color: black;*/
				/*border: 1px solid gray;*/
				width: 16rem;
				height: 5rem;
				position: absolute;
				bottom: 0;
				display: block;
			}
			
			#award {
				display: none;
				animation: award 1s linear 0s 1 normal;
				-webkit-animation: award 1s linear 0s 1 normal;
			}
			@keyframes award{
				from{
					opacity: 0;
					transform: scale(0);
				}
				to{
					opacity: 1;
					transform: scale(1);
				}
			}
			@-webkit-keyframes award{
				from{
					-webkit-opacity: 0;
					-webkit-transform: scale(0);
				}
				to{
					-webkit-opacity: 1;
					-webkit-transform: scale(1);
				}
			}
			
			#shadow {
				width: 16rem;
				/*height: 20rem;动态获取*/
				position: absolute;
				top: 0;
				background-color: black;
				opacity: 0.5;
				display: none;
			}
			#congratulation {
				width: 13rem;
				height: 7.525rem;
				position: absolute;
				left: 1.5rem;
				top: 5rem;
			}
			#tel65 {
				width: 8.725rem;
				height: 1.275rem;
				position: absolute;
				left: 3.6375rem;
				top: 8.5rem;
				border-radius: 0.3rem;
				padding-left: 0.2rem;
				font-size: 0.6rem;
			}
			#con_btn {
				background-image: url(img/p3/con_btn3.png);
				background-size: 100% 100%;
				width: 8.725rem;
				height: 1.725rem;
				position: absolute;
				top: 10rem;
				left: 3.6375rem;
				border-radius: 0.3rem;
			}
				
			
			#failed {
				display: none;
			}
			#failed_bg {
				width: 13rem;
				position: absolute;
				top: 6.525rem;
				left: 1.5rem;
			}
			#failed_btn {
				width: 8.525rem;
				position: absolute;
				top: 9rem;
				left: 3.7375rem;
			}
			
			/*#failed_bg {
				width: 13rem;
				position: absolute;
				top: 5rem;
				left: 1.5rem;
			}
			#failed_btn {
				background-image: url(img/p3/con_btn3.png);
				background-size: 100% 100%;
				width: 8.725rem;
				height: 1.725rem;
				position: absolute;
				top: 11rem;
				left: 3.6375rem;
				border-radius: 0.35rem;
			}*/
								
		</style>
	</head>

	<body>
		<div id="p1">
			<img id="p1_bg" src="img/p1/p1_bg_640_963_edfs2.png"/>
			<img id="bubble" src="img/p1/bubble.png"/>
			<img id="slogan1" src="img/p1/slogan1.png"/>
			<img id="slogan2_1" src="img/p1/slogan2_1.png"/>
			<img id="slogan2_2" src="img/p1/slogan2_2.png"/>
			<img id="slogan3_1" src="img/p1/slogan3_1.png"/>
			<img id="slogan3_2" src="img/p1/slogan3_2.png"/>
			<input type="button" name="enter" id="enter" class="scale_yy" value="" onclick="enter()" />
			<input type="button" name="btn_rule" id="btn_rule" class="scale_yy" value="" onclick="rule()" />
			<div id="rule_block">
				<img id="game_rule" src="img/p1/game_rule.png"/>
				<img id="begin_game" class="scale_yy" src="img/p1/begin_game.png" onclick="enter()"/>
			</div>
		</div>
		
		<div id=demo>
			<!--背景图-->
			<div id=demo1><img src="img/p2/bg_640_5019_finalline.png" /></div>
			<!--计时器-->
			<img id="clock" src="img/p2/clock_2.png"/>
			<span id="time_counter">0</span>
			<!--进度条-->
			<div id="progress_bar">
				<div id="progress_percent_pos">
					<span id="progress_percent">0</span>%
				</div>
				<em id="pro_bar"></em>
				<em id="pro_bar_front"></em>
			</div>
			<!--人-->
			<img id="player_left" src="img/p2/player_left.png" />
			<img id="player_right" src="img/p2/player_right.png"/>
			<img id="player_gogo" src="img/p2/player_gogo.gif"/>
			<!--按钮-->
			<input type="button" name="" id="btn_left" value="" />
			<input type="button" name="btn_left_down" id="btn_left_down" value="" />
			<input type="button" name="" id="btn_right" value="" />
			<input type="button" name="btn_right_down" id="btn_right_down" value="" />
			<img id="gogo" class="scale_yy" src="img/p2/gogo.png" onclick="on()"/>
			<img id="gogo_active" class="scale_yy" src="img/p2/gogo_active.png" onclick="off()"/>
			<div id="noready"></div>
			<!--播放器-->
			<span id="musicControl">
        		<a id="mc_play" class="stop" onclick="play_music();">
            		<audio id="musicfx" loop="loop" autoplay="autoplay" preload="auto">
               			<source src="raw/bgm_9s.mp3" type="audio/mpeg">
           			 </audio>
       			 </a>
 			</span>
 			<!--Ready-Go-->
			<img id="count_ready" src="img/p2/count_ready.png"/>
			<img id="count_go" src="img/p2/count_go.png"/>
			<!--颁奖页面-->
			<div id="shadow"></div>
			<div id="award">
				<img id="congratulation" src="img/p3/congratulation2.png"/>
				<input type="text" name="tel" id="tel65" value="" placeholder="请输入手机号码，以便领取奖品"/>
				<input type="submit" name="con_btn" id="con_btn" class="scale_yy" value="" />
				<!--<img id="con_btn" class="scale_yy" src="img/p3/con_btn2.png"/>-->
			</div>
			<!--失败页面-->
			<div id="failed">
				<img id="failed_bg" src="img/p3/failed_bg.png"/>
				<img id="failed_btn" src="img/p3/failed_btn.png" onclick="playagain()"/>
				<!--<input type="text" name="tel" id="tel65" value="" placeholder="请输入手机号码，以便领取奖品"/>-->
				<!--<input type="submit" name="failed_btn" id="failed_btn" class="scale_yy" value="" />-->
			</div>
			
		</div>

		<script type="text/javascript">
			var demo = document.getElementById("demo");
			var demo1 = document.getElementById("demo1");
			
			var pro_bar_front = document.getElementById("pro_bar_front");
			
			var player_left = document.getElementById("player_left");
			var palyer_right = document.getElementById("player_right");
			var player_gogo = document.getElementById("player_gogo");
			
			var btn_left = document.getElementById("btn_left");
			var btn_right = document.getElementById("btn_right");
			var btn_left_down = document.getElementById("btn_left_down");
			var btn_right_down = document.getElementById("btn_right_down");
			var gogo = document.getElementById("gogo");
			var gogo_active = document.getElementById("gogo_active");
			
			var count_ready = document.getElementById("count_ready");
			var count_go = document.getElementById("count_go");
			var noready = document.getElementById("noready");
			
			var award = document.getElementById("award");
			var shadow = document.getElementById("shadow");
			
			var per1 = 0;
			var player_pos = 12.3;
			var count = 0;
			
			var client_height = document.documentElement.clientHeight;
			demo.style.height = client_height / 40 + "rem";
			
			
			function enter () {
				$("#p1").hide();
				$("#demo").show();
			}
			
			function rule () {
				$("#enter").hide();
				$("#btn_rule").hide();
				$("#rule_block").show();
			}
			
			
			function play_music() {
				if ($('#mc_play').hasClass('on')) {
					$('#mc_play audio').get(0).pause();
					$('#mc_play').attr('class', 'stop');
				} else {
					$('#mc_play audio').get(0).play();
					$('#mc_play').attr('class', 'on');
				}
				$('#music_play_filter').hide();
				event.stopPropagation(); //阻止冒泡 
			}
			
			
			count_ready.addEventListener("webkitAnimationEnd", function() {
				count_ready.style.display = "none";
				count_go.style.display = "block";
			}, false);
			count_go.addEventListener("webkitAnimationEnd", function() {
				count_go.style.display = "none";
				//计时函数
				var a = 0;
				time_interval = setInterval(function() {
					$("#time_counter").html(a);
					if (a<3) {
						a+=0.01;
						a = parseFloat(a.toFixed(2));
					} else{
						clearInterval(time_interval);
						if (player_pos > 2.5) {
							$("#failed").show();
						}
					}
				}, 10);
				noready.style.display = "none";
					
			}, false);
			
//			function anwei () {
//				$("#failed").hide();
//				shadow.style.height = client_height / 40 + "rem";
//				shadow.style.display = "block"
//				award.style.display = "block";
//			}
			function playagain () {
				$("#failed").hide();
				player_pos = 12.3;
				demo1.style.bottom = 0;
				clearInterval(autogo);
				
				var aa = 0;
				time_interval = setInterval(function() {
					$("#time_counter").html(aa);
					if (aa < 3) {
						aa += 0.01;
						aa = parseFloat(aa.toFixed(2));
					} else{
						clearInterval(time_interval);
						if (player_pos > 2.5) {
							$("#failed").show();
						}
					}
				}, 10);
			}

			
			btn_left.addEventListener("touchstart", handleStart1, false);
			btn_right.addEventListener("touchstart", handleStart2, false);
			btn_left_down.addEventListener("touchstart", handleStart3, false);
			btn_right_down.addEventListener("touchstart", handleStart4, false);
			
			function handleStart1(evt) {
				
				evt.preventDefault(); //阻止事件的默认行为
				per1 -= 0.525;
				
				count += 1;
				if(demo1.offsetTop < -20 && count == 1){
					demo1.style.bottom = per1 + "rem";
				}
				if (demo1.offsetTop >= -20 && count == 1) {
					if (player_pos > 2.5) {
						player_pos -= 0.525;
						player_right.style.top = player_pos + "rem";
						if(player_pos <= 2.5) {
							player_right.style.top = player_pos + "rem";
							clearInterval(time_interval);
							
							shadow.style.height = client_height / 40 + "rem";
							shadow.style.display = "block"
							award.style.display = "block";
						}
					}
				}
				
				OST = 100 - (player_pos*40 - demo1.offsetTop - 102) / 40;
				OST = parseFloat(OST.toFixed(2));
				//90.05+12.3-2.55=99.8
				$("#progress_percent").html(OST);
				pro_bar_front.style.width = OST/16 + "rem";
				
				$("#btn_left_down").show();
				
				$("#player_left").hide();
				$("#player_right").show();
				
				$("#player_gogo").hide();
				$("#gogo_active").hide();
				clearInterval(autogo);
				
			}
			function handleStart3(evt) {
				
				evt.preventDefault(); //阻止事件的默认行为
				per1 -= 0.525;
				
				count += 1;
				if(demo1.offsetTop < -20 && count == 1){
					demo1.style.bottom = per1 + "rem";
				}
				if (demo1.offsetTop >= -20 && count == 1) {
					if (player_pos > 2.5) {
						player_pos -= 0.525;
						player_right.style.top = player_pos + "rem";
						if(player_pos <= 2.5) {
							player_right.style.top = player_pos + "rem";
							clearInterval(time_interval);
							
							shadow.style.height = client_height / 40 + "rem";
							shadow.style.display = "block"
							award.style.display = "block";
						}
					}
				}
				
				OST = 100 - (player_pos*40 - demo1.offsetTop - 102) / 40;
				OST = parseFloat(OST.toFixed(2));
				//90.05+12.3-2.55=99.8
				$("#progress_percent").html(OST);
				pro_bar_front.style.width = OST/16 + "rem";
				
				$("#btn_left_down").hide();
				
				$("#player_left").hide();
				$("#player_right").show();
				
				$("#player_gogo").hide();
				$("#gogo_active").hide();
				clearInterval(autogo);
				
			}

			function handleStart2(evt) {
				evt.preventDefault(); //阻止事件的默认行为
				per1 -= 0.525;
				//计数器归零
				count = 0;
				
				if (demo1.offsetTop >= -20) {
					player_left.style.top = player_pos + "rem";
					if (player_pos <= 2.5) {
						clearInterval(autogo);
						
						shadow.style.height = client_height / 40 + "rem";
						shadow.style.display = "block"
						award.style.display = "block";
					}
				}
				
				OST = 100 - (player_pos*40 - demo1.offsetTop - 102) / 40;
				OST = parseFloat(OST.toFixed(2));
				//90.05+12.3-2.55=99.8
				$("#progress_percent").html(OST);
				pro_bar_front.style.width = OST/16 + "rem";
				
				$("#btn_right_down").show();
				
				$("#player_right").hide();
				$("#player_left").show();

				$("#player_gogo").hide();
				$("#gogo_active").hide();
				clearInterval(autogo);
			}
			function handleStart4(evt) {
				evt.preventDefault(); //阻止事件的默认行为
				per1 -= 0.525;
				//计数器归零
				count = 0;
				
				if (demo1.offsetTop >= -20) {
					player_left.style.top = player_pos + "rem";
					if (player_pos <= 2.5) {
						clearInterval(autogo);
						
						shadow.style.height = client_height / 40 + "rem";
						shadow.style.display = "block"
						award.style.display = "block";
					}
				}
				
				OST = 100 - (player_pos*40 - demo1.offsetTop - 102) / 40;
				OST = parseFloat(OST.toFixed(2));
				//90.05+12.3-2.55=99.8
				$("#progress_percent").html(OST);
				pro_bar_front.style.width = OST/16 + "rem";
				
				$("#btn_right_down").hide();
				
				$("#player_right").hide();
				$("#player_left").show();

				$("#player_gogo").hide();
				$("#gogo_active").hide();
				clearInterval(autogo);
			}
			
			
			
			var autogo;
			var time_interval;
			var progress_percent;
			var OST;
			function on () {
				$("#player_left").hide();
				$("#player_right").hide();
				$("#gogo_active").show();
				$("#player_gogo").show();
				
				
//				if (OST/40 <= 2.55) {
//					alert(OST);
//				} else {
//					setInterval(function function_name () {
//						$("#progress_percent").html(OST);
//					}, 1000)
//				}
				
					
				progress_percent = setInterval(function function_name () {
					OST = 100 - (player_pos*40 - demo1.offsetTop - 102) / 40;
					OST = parseFloat(OST.toFixed(2));
					//90.05+12.3-2.55=99.8
					$("#progress_percent").html(OST);
					
					pro_bar_front.style.width = OST/16 + "rem";
				}, 10);
				
				autogo = setInterval(function() {
					if(demo1.offsetTop < -20){
						per1 -= 0.525;
						demo1.style.bottom = per1 + "rem";
					}
					
					if (demo1.offsetTop >= -20) {
						if (player_pos > 2.5) {
							player_pos -= 0.525;
							player_gogo.style.top = player_pos + "rem";
						} else {
							$("#player_gogo").hide();
							$("#gogo_active").hide();
							player_left.style.top = player_pos + "rem";
							$("#player_left").show();
							clearInterval(time_interval);
							clearInterval(autogo);
							
							shadow.style.height = client_height / 40 + "rem";
							shadow.style.display = "block"
							//alert("on() block")
							award.style.display = "block";
						}
					}
				}, 40);
				
//				var a = 0;
//				time_interval = setInterval(function() {
//					$("#time_counter").html(a);
//					if (a<=30) {
//						a+=0.01;
//						a = parseFloat(a.toFixed(2));
//					} else{
//						clearInterval(time_interval);					
//					}
//				}, 10);
			}
			function off () {
				$("#player_gogo").hide();
				$("#gogo_active").hide();
				player_left.style.top = player_pos + "rem";
				$("#player_left").show();
				clearInterval(autogo);
			}
			
//			function close_noSysName () {
//				$("#award").hide("normal", "swing");
//				$("#shadow").hide();
//			}
			$("#shadow").bind("click", function() {
//				$("#award").hide("normal", "swing");
//				$("#shadow").hide();
			});
			
			
			
		</script>
	</body>

</html>